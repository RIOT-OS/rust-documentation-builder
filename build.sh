#!/bin/sh

export DOCUMENTATION_HEADERS="${PWD}/RIOT"

export RIOT_CC="gcc"
# Currently from a run of the shell example, with just the -I paths replaced, and the riotbuild.h header removed
export RIOT_CFLAGS="'-DTHREAD_STACKSIZE_MAIN=(THREAD_STACKSIZE_DEFAULT + 2000)' -DDEVELHELP -Werror -Wall -Wextra -pedantic -g3 -std=gnu11 -m32 -fstack-protector-all -ffunction-sections -fdata-sections -DDEBUG_ASSERT_VERBOSE -DRIOT_APPLICATION=\"shell\" -DBOARD_NATIVE=\"native\" -DRIOT_BOARD=BOARD_NATIVE -DCPU_NATIVE=\"native\" -DRIOT_CPU=CPU_NATIVE -DMCU_NATIVE=\"native\" -DRIOT_MCU=MCU_NATIVE -fno-common -ffunction-sections -fdata-sections -Wall -Wextra -Wmissing-include-dirs -fno-delete-null-pointer-checks -fdiagnostics-color -Wstrict-prototypes -Wold-style-definition -gz -Wformat=2 -Wformat-overflow -Wformat-truncation  -DRIOT_VERSION=\"2020.10-devel-1531-gf69d6d\" -DMODULE_AUTO_INIT -DMODULE_AUTO_INIT_SAUL -DMODULE_AUTO_INIT_ZTIMER -DMODULE_BOARD -DMODULE_CORE -DMODULE_CORE_IDLE_THREAD -DMODULE_CORE_INIT -DMODULE_CORE_MSG -DMODULE_CORE_PANIC -DMODULE_CPU -DMODULE_FMT -DMODULE_FRAC -DMODULE_NATIVE_DRIVERS -DMODULE_NETDEV_REGISTER -DMODULE_PERIPH -DMODULE_PERIPH_COMMON -DMODULE_PERIPH_GPIO -DMODULE_PERIPH_GPIO_LINUX -DMODULE_PERIPH_INIT -DMODULE_PERIPH_INIT_GPIO -DMODULE_PERIPH_INIT_GPIO_LINUX -DMODULE_PERIPH_INIT_PM -DMODULE_PERIPH_INIT_TIMER -DMODULE_PERIPH_INIT_UART -DMODULE_PERIPH_PM -DMODULE_PERIPH_TIMER -DMODULE_PERIPH_UART -DMODULE_PHYDAT -DMODULE_PS -DMODULE_SAUL -DMODULE_SAUL_DEFAULT -DMODULE_SAUL_INIT_DEVS -DMODULE_SAUL_REG -DMODULE_SHELL -DMODULE_SHELL_COMMANDS -DMODULE_STDIN -DMODULE_STDIO_NATIVE -DMODULE_SYS -DMODULE_ZTIMER -DMODULE_ZTIMER_AUTO_INIT -DMODULE_ZTIMER_CONVERT -DMODULE_ZTIMER_CONVERT_FRAC -DMODULE_ZTIMER_CONVERT_SHIFT -DMODULE_ZTIMER_CORE -DMODULE_ZTIMER_EXTEND -DMODULE_ZTIMER_MSEC -DMODULE_ZTIMER_PERIPH_TIMER -DMODULE_ZTIMER_USEC -I${DOCUMENTATION_HEADERS}/core/include -I${DOCUMENTATION_HEADERS}/drivers/include -I${DOCUMENTATION_HEADERS}/sys/include -I${DOCUMENTATION_HEADERS}/boards/native/include -DNATIVE_INCLUDES -I${DOCUMENTATION_HEADERS}/boards/native/include/ -I${DOCUMENTATION_HEADERS}/core/include/ -I${DOCUMENTATION_HEADERS}/drivers/include/ -I${DOCUMENTATION_HEADERS}/cpu/native/include -I${DOCUMENTATION_HEADERS}/sys/include -I${DOCUMENTATION_HEADERS}/cpu/native/include  "

cargo +nightly doc --target i686-unknown-linux-gnu
